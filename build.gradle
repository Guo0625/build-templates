// GENERATED BY UNITY. REMOVE THIS COMMENT TO PREVENT OVERWRITING WHEN EXPORTING AGAIN





buildscript {
    repositories {
        google()
        jcenter()

//        maven { url 'https://maven.aliyun.com/repository/public/' }
//        maven { url 'https://maven.aliyun.com/repository/google/' }
//        maven { url 'https://maven.aliyun.com/repository/jicenter/' }
		
        maven { url 'https://developer.huawei.com/repo/'}
        maven { url 'https://dl.bintray.com/umsdk/release' }
//        maven {
//            url 'https://android-sdk.is.com/'
//        }
//        maven { url "https://dl.bintray.com/ironsource-mobile/android-adapters/"}
//        maven { url "https://dl.bintray.com/ironsource-mobile/android-sdk"}
    }

    dependencies {
        classpath 'com.huawei.agconnect:agcp:1.4.2.300'
        //classpath 'com.wb.check:plugin:1.0.2'
        classpath 'com.android.tools.build:gradle:4.0.1'
}
}

allprojects {
    repositories {
        //友盟 需放到最前面
        maven { url 'https://repo1.maven.org/maven2/' }
		maven { url "http://dnsdk.vimedia.cn:8081/repository/vigame-public/" }
        maven { url "http://dnsdk.vimedia.cn:8081/repository/vimedia-public/" }
		
        google()
        jcenter()
        flatDir {
            dirs 'libs'
        }
      
//        maven { url 'https://maven.aliyun.com/repository/public/' }
//        maven { url 'https://maven.aliyun.com/repository/google/' }
//        maven { url 'https://maven.aliyun.com/repository/jicenter/' }
//        maven {
//            url 'https://android-sdk.is.com/'
//        }
        maven { url "https://dl.bintray.com/ironsource-mobile/android-adapters/"}
        maven { url "https://dl.bintray.com/ironsource-mobile/android-sdk"}

        maven { url 'https://developer.huawei.com/repo/'}
		
        maven { url 'https://dl.bintray.com/umsdk/release' }

//        maven {
//            url 'https://maven.fabric.io/public'
//        }

        //头条聚合或者MTG
        maven { url "https://dl.bintray.com/mintegral-official/Andorid_ad_SDK_for_china_support"}
                    //MTG
        maven {
            url "https://dl-maven-android.mintegral.com/repository/mbridge_android_sdk_china"
        }

        // 4399
        maven { url 'https://mvn.4399doc.com/repository/maven-releases/' }

        maven {
            url "https://artifact.bytedance.com/repository/Volcengine/"
        }
    }
}

apply plugin: 'com.android.application'
//#APPLY_PLUGIN_BEGIN
//#APPLY_PLUGIN_END


 dependencies {
     implementation fileTree(dir: 'libs', include: ['*.jar'])
     implementation project(':wbLibrary')

 }

android {
    compileSdkVersion 29
    buildToolsVersion '29.0.3'

    compileOptions {
        sourceCompatibility JavaVersion.VERSION_1_8
        targetCompatibility JavaVersion.VERSION_1_8
    }

    defaultConfig {
        minSdkVersion 21
        targetSdkVersion 26
        applicationId 'com.dn.tgxm.gg'
        ndk {
            abiFilters 'armeabi-v7a'
        }
        versionCode 1000
        versionName '1.0.0'

        multiDexEnabled true
        manifestPlaceholders = [
            
                Splash_Orientation:"portrait",
                DN_APPID:"13665",
                DN_APPKEY:"8qrdevjcboklvyc9m88z2kkw3lck38tnjqu9x5azuf7a44gvpy",
                DN_CHANNEL:"baibao",
                DN_PRJID:"13665166",
                DN_Screen_Orientation:"unspecified",
                AppsFlyer_DevKey:"X9NxxaMp4neHCFYreDxtd5",
                ADMOB_APP_ID:"ca-app-pub-7851203648968517~3923216450",
	
				//#track_BEGAIN
                ADJUST_TOKEN:"wltxsy41qygw",
                ADJUST_TESTMODEL:"false",
                ADJUST_TOKEN_SECOND:"mg6erg",
                ReYunAppKey:"471bf341b4a1ad6f46eb48f56a935e8e",
                APPLOG_SCHEME:"rangersapplog.byax6uyt",
                HEADLINE_APPID:"152405",
                GDTAppId:"1111232169",
                GDTAppKey:"eadf902c98e6617a803938457c392b05",
				//#track_END
	
                //#TJ_BEGAIN
                HEADLINE_APPID:"152405",
                ReYunAppKey:"1",
                UMENG_APPKEY:"5e0f2229570df3254b0000a2",
                APPLOG_SCHEME:"rangersapplog.byAx6uYt".toLowerCase(),
                //#TJ_END

                //#Pay_BEGAIN
                //#Pay_END

               
                
        ]
    }

    lintOptions {
		checkReleaseBuilds false
        abortOnError false
    }

    aaptOptions {
        noCompress = ['.unity3d', '.ress', '.resource', '.obb', 'agreement.html', 'configpay.xml', 'configvigame.xml', 'feedata_meizu.xml', 'st.txt']
        ignoreAssetsPattern = "!.svn:!.git:!.ds_store:!*.scc:.*:!CVS:!thumbs.db:!picasa.ini:!*~"
    }

    signingConfigs {

		debug {
            storeFile file("WBdebug.keystore")
            storePassword "android"
            keyAlias "androiddebugkey"
            keyPassword "android"
            v1SigningEnabled true
            v2SigningEnabled false
        }

        release {
            storeFile file("WBdebug.keystore")
            storePassword "android"
            keyAlias "androiddebugkey"
            keyPassword "android"
            v1SigningEnabled true
            v2SigningEnabled false
        }
    }

    buildTypes {
        debug {
            minifyEnabled false
            useProguard false
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-unity.txt', 'proguard-user.txt'
            signingConfig signingConfigs.debug
            jniDebuggable true
        }
        release {
            minifyEnabled true
            useProguard true
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-unity.txt', 'proguard-user.txt'
            signingConfig signingConfigs.debug
        }
    }

    packagingOptions {
        doNotStrip '*/armeabi-v7a/*.so'
    }


    bundle {
        language {
            enableSplit = false
        }
        density {
            enableSplit = false
        }
        abi {
            enableSplit = true
        }
    }
	
	flavorDimensions "myDimension"
	productFlavors {
		
		common {
			dimension 'myDimension'
		}
	}
	sourceSets {
		common {
		    manifest.srcFile 'myFlavor/AndroidManifest.xml'
			aidl.srcDirs= ['myFlavor/aidl']
			java.srcDirs = ['myFlavor/java']
			resources.srcDirs = ['myFlavor/resources']
            res.srcDirs = ['myFlavor/res']
            assets.srcDirs = ['myFlavor/assets']
            jniLibs.srcDirs = ['myFlavor/libs']
		}
	}
    //rename apk
    android.applicationVariants.all { variant ->
        variant.outputs.each { output ->
            variant.productFlavors.each { flavor ->
                def project = flavor.manifestPlaceholders['DN_PRJID']==null ? defaultConfig.manifestPlaceholders['DN_PRJID'] : flavor.manifestPlaceholders['DN_PRJID']
                def separator = "_"
                def packageName = variant.applicationId
                def versionName = variant.versionName
				def channel = flavor.manifestPlaceholders['DN_CHANNEL']==null ? defaultConfig.manifestPlaceholders['DN_CHANNEL'] : flavor.manifestPlaceholders['DN_CHANNEL']
                def date = new Date()
                def formattedDate = date.format('yyyyMMdd')

                def apkName = project + separator + packageName + separator + "v" + versionName + separator + channel + separator + formattedDate + ".apk"
                output.outputFileName = apkName
            }
        }
    }
}
